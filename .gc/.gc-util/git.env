#!/usr/bin/env bash

gitcid_get_default_branch() {
    GITCID_REPO_PATH=${GITCID_REPO_PATH:-"./"}
    if [ $# -ge 1 ]; then
        GITCID_REPO_PATH="$1"
    fi

    git ls-remote --symref "${GITCID_REPO_PATH}" HEAD | head -n1 | xargs -0 | tr '\t' ' ' | cut -d' ' -f2 | rev | cut -d'/' -f1 | rev | head -n1
}

gitcid_get_current_branch() {
    git rev-parse --abbrev-ref HEAD
}

gitcid_util_git() {
    gitcid_log_notice "${BASH_SOURCE[0]}" $LINENO "GitCid script invoked: $0 $@\n" >/dev/null
    gitcid_log_import_verbose "${BASH_SOURCE[0]}" $LINENO "GitCid git utils imported: ${BASH_SOURCE[0]}"
}

gitcid_util_git "$@"
